//#pragma GCC optimize("03")

#include <iostream>
#include <fstream>
#include <algorithm>
#include <vector>
#include <cmath>
#include <cstring>

#define BIG 1000000007
#define INF 0x7fffffff
#define INFL 0x7fffffffffffffffLL
#define SPEED_IO ios_base::sync_with_stdio(false);
#define fl(i,n) for(int (i) = 0; (i) < (n); ++(i))
#define fle(i,l,u) for(int (i) = (int)(l);(i) < (int)(u); ++(i))
#define ea(it,a) for(auto (it) = (a).begin(); (it) != (a).end(); ++(it))
#define mset(m,v) memset(m,v,sizeof(m))
#define sz(x) (x).size()

#ifndef ONLINE_JUDGE
#define cin fin
std::ifstream fin("zin.txt");
#endif

using namespace std;

typedef long long ll;
typedef vector <vector <int>> vvi;

//Returns the sum of the elements of the contiguous subarray with the maximum total sum
ll kadane(const int* a, int n) {

    ll grandMax = a[0], currMax = a[0];

    fle(i, 1, n) {
		currMax = a[i] > a[i] + currMax ? a[i] : a[i] + currMax;
		grandMax = grandMax > currMax ? grandMax : currMax;
    }

    return grandMax;
}

int main() {

    ll t, n, m, k, q, l, r, x, y, z, a, b, c, d, e, f, g;

    cin >> t;

    while (t--) {
        cin >> n >> k;
        int a[n];
        fl (i, n) cin >> a[i];
        int bigArr[2 * n];
        fl (i, 2 * n) bigArr[i] = a[i % n];

        ll sumArr[n];
        ll sum = 0;
        fl (i, n) {
            sum += a[i];
            sumArr[i] = sum;
        }
        ll bSumArr[2 * n];
        ll bSum = 0;
        fl (i, 2 * n) {
            bSum += bigArr[i];
            bSumArr[i] = bSum;
        }

        ll total = kadane(a, n);
        //cout << total << endl;

        ll bTotal = kadane(bigArr, 2 * n);
        //cout << bTotal << endl;

		if (total == sum) cout << total * k << endl;
		else if (sum * k - (bSum - bTotal) > total) cout << sum * k - (bSum - bTotal) << endl;
		else cout << total << endl;
    }

    return 0;
}

